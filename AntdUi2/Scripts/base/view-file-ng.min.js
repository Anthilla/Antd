!function(){"use strict";angular.module("view.file",["view.file.tpls","cb.x2js","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","hljs","ngJsonExplorer","ngSanitize","RecursionHelper"])}(),function(){"use strict";function n(n,e,i,l){var t=this;t.trustUri=function(n){e.trustAsResourceUrl(n)},t.load=function(e){var t=i.get(e);t?angular.isArray(t)?(n.loading=!1,n.json=JSON.parse(t[1])):t.then(function(e){n.json=JSON.parse(e.data)}):l.get(e,{cache:i,transformResponse:function(n,e){return n}}).then(function(e){n.loading=!1,n.json=JSON.parse(e.data)})}}angular.module("view.file").controller("FriendlyJsonCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http"]}(),function(){"use strict";function n(n){function e(n,e){var i;return i=e.template?e.template:"/view-file-ng/friendly-json.html"}return{restrict:"E",controller:"FriendlyJsonCtrl",controllerAs:"ctrl",scope:{uri:"=?",json:"=?"},templateUrl:e,compile:function(e){return n.compile(e,function(n,e,i,l){n.loading=!0,n.$watch("uri",function(n){n&&l.load(n)})})}}}angular.module("view.file").directive("friendlyJson",n).filter("isObject",function(){return function(n){return angular.isObject(n)}}).filter("isArray",function(){return function(n){return angular.isArray(n)}}).filter("isFunction",function(){return function(n){return angular.isFunction(n)}}),n.$inject=["RecursionHelper"]}(),function(){"use strict";function n(n,e,i,l,t){var o=this;o.trustUri=function(n){e.trustAsResourceUrl(n)},o.load=function(e){var t=i.get(e);t?angular.isArray(t)?(n.loading=!1,o.parse(t[1])):t.then(function(e){n.loading=!1,o.parse(e.data)}):l.get(e,{cache:i,transformResponse:function(n,e){return n}}).then(function(e){n.loading=!1,o.parse(e.data)})},o.parse=function(e){n.json=t.xml_str2json(e)}}angular.module("view.file").controller("FriendlyXmlCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http","x2js"]}(),function(){"use strict";function n(n){function e(n,e){var i;return i=e.template?e.template:"/view-file-ng/friendly-json.html"}return{restrict:"E",controller:"FriendlyXmlCtrl",controllerAs:"ctrl",scope:{uri:"=?",xml:"=?"},templateUrl:e,compile:function(e){return n.compile(e,function(n,e,i,l){n.loading=!0,n.$watch("uri",function(n){n&&l.load(n)}),n.$watch("xml",function(n){n&&l.parse(n)})})}}}angular.module("view.file").directive("friendlyXml",n),n.$inject=["RecursionHelper"]}(),function(){"use strict";function n(n,e){return function(i,l,t){i.$watch(function(n){return n.$eval(t.includeSafe)},function(i){n.get(i).then(function(n){var i=n.data;l.html(e(i))})})}}angular.module("view.file").directive("includeSafe",n),n.$inject=["$http","$sanitize"]}(),function(){"use strict";function n(n){function e(e,i,l,t,o){return n.open(angular.extend({templateUrl:e+"",controller:["$scope","$uibModalInstance","title","ctrl","validate",function(n,e,i,l,t){n.title=i,n.ctrl=l,n.alerts=[],n.ok=function(){t&&(n.alerts=t(n)),0===n.alerts.length&&e.close(n.ctrl)},n.cancel=function(){e.dismiss("cancel")}}],size:"lg",resolve:{title:function(){return i},ctrl:function(){return l},validate:function(){return t||function(n){var e=[];return n.form&&angular.forEach(n.form.$error,function(n,i){angular.forEach(n,function(n,l){e.push(i+": "+(n.$name||l))})}),e}}}},o)).result}var i={show:e};return i}angular.module("view.file").service("ModalService",["$uibModal",n])}(),function(){"use strict";function n(n,e,i,l,t){var o=this;o.trustUri=function(n){e.trustAsResourceUrl(n)},o.loadHljs=function(e){n.loading=!i.get(e),n.loading?l.get(e,{cache:i,transformResponse:function(n,e){return n}}).then(function(i){n.loading=!1,n.hljsUri=e}):n.hljsUri=e},o.showModal=function(){n.allowModal&&t.show("/view-file-ng/show-file.modal.html",null,n)},o.toggleCode=function(){n.showCode=!n.showCode}}angular.module("view.file").controller("ViewFileCtrl",n),n.$inject=["$scope","$sce","$templateCache","$http","ModalService"]}(),function(){"use strict";function n(){function n(n,e){return void 0!==n?n===!0||"true"===n:e}function e(n){var e="other";return/\/[x]?html/.test(n)?e="html":/[\+\/]json$/.test(n)?e="json":/[\+\/]xml$/.test(n)?e="xml":/^(audio|image|text|video|xml)\//.test(n)?e=n.split("/")[0]:/^application\//.test(n),e}function i(n,e){var i;return i=e.template?e.template:"/view-file-ng/view-file.html"}return{restrict:"E",controller:"ViewFileCtrl",controllerAs:"ctrl",scope:{data:"=?",uri:"=?",contentType:"=",_allowModal:"@allowModal",_controls:"@controls",downloadUri:"=?",fileName:"=?",_showCode:"@showCode",_trustUri:"@trustUri"},templateUrl:i,link:function(i,l,t,o){i.allowModal=n(i._allowModal,!0),i.controls=n(i._controls,i.allowModal||!!i.downloadUri),i.showCode=n(i._showCode,!1),i.trustUri=n(i._trustUri,!1),t.uri?(i.loading=!0,i.$watch("uri",function(n){n&&(i.fileName=i.fileName||n.split("/").pop(),i.fileType=e(i.contentType),i.trustUri&&o.trustUri(n),"xml"===i.fileType?o.loadHljs(n):i.loading=!1)})):(i.loading=!1,i.fileType=e(i.contentType))}}}angular.module("view.file").directive("viewFile",n)}(),function(){"use strict";angular.module("view.file").directive("viewObject",["$compile",function(n){return{restrict:"E",link:function(e,i,l){var t=' data="'+e.$eval(l.data)+'"',o=l.type?' type="'+e.$eval(l.type)+'"':"",r=l.height?' height="'+e.$eval(l.height)+'"':"",a=l.width?' width="'+e.$eval(l.width)+'"':"",s=i.html();i.html('<object " '+r+a+o+t+">"+s+"</object>"),n(i.contents())(e)}}}])}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/friendly-json.html",'<dl class="dl-horizontal">\n  <span ng-repeat="(key,val) in json track by $index" ng-hide="(val | isFunction) || (key.startsWith(\'_\') && key !== \'__text\')">\n    <dt>{{ key.startsWith(\'__\') ? key.replace(\'__\', \'\') : key }}</dt>\n    <!-- simple value -->\n    <dd ng-if="!(val | isObject)">{{ val !== \'\' ? val : \'&#160;\' }}</dd>\n    <!-- array or object -->\n    <span ng-if="(val | isObject)">\n      <!-- array with simple values -->\n      <dd ng-if="(val | isArray) && !(val[0] | isObject)">{{ val.join(\', \') }}</dd>\n      <!-- add nbsp for better alignment of values -->\n      <dd ng-if="!(val | isArray) || (val[0] | isObject)">&#160;</dd>\n      <!-- object, recurse -->\n      <dd ng-if="!(val | isArray)">\n        <!--span ng-init="json = val" ng-include="\'/view-file-ng/friendly-json.html\'"></span-->\n        <friendly-json json="val"></friendly-json>\n      </dd>\n      <!-- array of object, repeat recurse -->\n      <dd ng-if="(val | isArray) && (val[0] | isObject)" ng-repeat="v in val track by $index">\n        <!--span ng-repeat="json in val track by $index" ng-include="\'/view-file-ng/friendly-json.html\'"></span-->\n        <friendly-json json="v"></friendly-json>\n      </dd>\n    </span>\n  </span>\n</dl>\n')}])}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/show-file.modal.html",'<form class="form" role="form">\n  <div class="modal-header">\n    <h3 class="modal-title">{{ ctrl.fileName }}</h3>\n  </div>\n  <div ng-cloak class="modal-body clearfix">\n    <view-file uri="ctrl.uri" content-type="ctrl.contentType" controls="false" show-code="{{ctrl.showCode}}"></view-file>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary pull-right" ng-click="cancel()">Close</button>\n  </div>\n</form>')}])}(),function(n){try{n=angular.module("view.file.tpls")}catch(e){n=angular.module("view.file.tpls",[])}n.run(["$templateCache",function(n){n.put("/view-file-ng/view-file.html",'<div class="view-file container-fluid" ng-class="fileType">\n  <div class="row">\n    <div class="controls col-sm-1 text-right" ng-if="controls && (((fileType === \'xml\') || (fileType === \'json\') || (fileType === \'html\') || (fileType === \'text\')) || allowModal || downloadUri)">\n      <div class="code-control">\n        <a ng-if="(fileType === \'xml\') || (fileType === \'json\') || (fileType === \'html\') || (fileType === \'text\')" class="btn btn-default" ng-click="ctrl.toggleCode()">\n          <span ng-show="!showCode && ((fileType === \'json\') || (fileType === \'text\'))">{ }</span>\n          <i ng-show="!showCode && ((fileType === \'html\') || (fileType === \'xml\'))" class="fa fa-code"></i>\n          <i ng-show="showCode" class="fa fa-align-left"></i>\n        </a>\n      </div>\n\n      <div class="modal-control">\n        <a ng-if="allowModal && fileType !== \'audio\'" class="btn btn-default" ng-click="ctrl.showModal()"><i class="glyphicon glyphicon-resize-full"></i></a>\n      </div>\n\n      <div class="download-control">\n        <a ng-if="downloadUri" class="btn btn-default" ng-href="{{downloadUri}}" target="_blank" download><i class="glyphicon glyphicon-download-alt"></i></a>\n      </div>\n    </div>\n\n    <div class="viewer-wrapper" ng-class="{\'col-sm-11\': controls, \'col-sm-12\': !controls}">\n      <div class="loading" ng-show="loading">\n        Loading... <i class="fa fa-spinner fa-spin"></i>\n      </div>\n\n      <div class="viewer" ng-hide="loading">\n        <!-- audio / video -->\n        <div class="source" ng-if="(fileType === \'audio\' || fileType === \'video\') && uri">\n          <videogular ng-class="fileType" ng-if="uri">\n            <vg-media vg-src="uri"></vg-media>\n            <vg-controls>\n              <vg-play-pause-button></vg-play-pause-button>\n              <vg-time-display>{{ currentTime | date:\'mm:ss\' }}</vg-time-display>\n              <vg-scrub-bar>\n                <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n              </vg-scrub-bar>\n              <vg-time-display>{{ timeLeft | date:\'mm:ss\' }}</vg-time-display>\n              <vg-volume>\n                <vg-mute-button></vg-mute-button>\n                <vg-volume-bar></vg-volume-bar>\n              </vg-volume>\n              <vg-fullscreen-button ng-show="fileType === \'video\'"></vg-fullscreen-button>\n            </vg-controls>\n          </videogular>\n        </div>\n        <div ng-if="(fileType === \'audio\' || fileType === \'video\') && !uri" class="alert alert-warning">\n          Data view not supported for audio and video\n        </div>\n\n        <!-- html / text -->\n        <div ng-if="(fileType === \'html\') || (fileType === \'text\')">\n          <div ng-if="!showCode && uri">\n            <div class="source" include-safe="uri"></div>\n          </div>\n          <div ng-if="!showCode && !uri">\n            <div class="source" ng-bind-html="data"></div>\n          </div>\n          <div ng-if="showCode && uri">\n            <hljs hljs-include="uri"></hljs>\n          </div>\n          <div ng-if="showCode && !uri">\n            <hljs hljs-source="data"></hljs>\n          </div>\n        </div>\n\n        <!-- image -->\n        <div class="source text-center" ng-if="fileType === \'image\' && uri">\n          <img ng-src="{{uri}}">\n        </div>\n        <div class="alert alert-warning" ng-if="fileType === \'image\' && !uri">\n          Data view not supported for images\n        </div>\n\n        <!-- json -->\n        <div ng-if="fileType === \'json\'">\n          <div ng-if="!showCode && uri">\n            <friendly-json class="source" uri="uri"></friendly-json>\n          </div>\n          <div ng-if="!showCode && !uri">\n            <friendly-json class="source" json="data"></friendly-json>\n          </div>\n          <div ng-if="showCode && uri">\n            <json-explorer class="source" url="uri"></json-explorer>\n          </div>\n          <div ng-if="showCode && !uri">\n            <json-explorer class="source" json-data="data"></json-explorer>\n          </div>\n        </div>\n\n        <!-- xml -->\n        <div ng-if="fileType === \'xml\'">\n          <div ng-if="!showCode && uri">\n            <friendly-xml class="source" uri="uri"></friendly-xml>\n          </div>\n          <div ng-if="!showCode && !uri">\n            <friendly-xml class="source" xml="data"></friendly-xml>\n          </div>\n          <div ng-if="showCode && uri">\n            <hljs hljs-include="hljsUri"></hljs>\n          </div>\n          <div ng-if="showCode && !uri">\n            <hljs hljs-source="data"></hljs>\n          </div>\n        </div>\n\n        <!-- other -->\n        <view-object class="source" ng-if="fileType === \'other\' && uri" data="uri" type="contentType">\n          <a ng-show="downloadUri" class="btn btn-default" ng-href="{{downloadUri}}">Download</a>\n          <div ng-show="!downloadUri" class="alert alert-warning">Alert: cannnot display this file!</div>\n        </view-object>\n        <div class="alert alert-warning" ng-if="fileType === \'other\' && !uri">\n          Data view not supported for binaries\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>')}])}();